import { useEffect, useRef, useState } from "react";
import { Button, Card, Input, List } from "antd";
import {
  SendOutlined,
  MessageOutlined,
  CloseOutlined,
} from "@ant-design/icons";

interface Message {
  text: string | JSX.Element;
  sender: "user" | "bot";
}

interface QAPair {
  question: string;
  answer: string;
}

const predefinedQuestions: QAPair[] = [
  {
    question: "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржерзЗржХрзЗ ржХрзА ржХрзА рж╕рзЗржмрж╛ ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржпрж╝?",
    answer:
      "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржерзЗржХрзЗ ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕, ржЪрж╛рж░рж┐рждрзНрж░рж┐ржХ рж╕ржиржжржкрждрзНрж░, ржнрзВржорж┐рж╣рзАржи рж╕ржиржжржкрждрзНрж░, ржУржпрж╝рж╛рж░рж┐рж╢рж╛ржи рж╕ржиржжржкрждрзНрж░, ржЕржмрж┐ржмрж╛рж╣рж┐ржд рж╕ржиржжржкрждрзНрж░, ржкрзНрж░рждрзНржпржпрж╝ржиржкрждрзНрж░, ржЕрж╕рзНржмржЪрзНржЫрж▓ ржкрзНрж░рждрзНржпржпрж╝ржиржкрждрзНрж░, ржирж╛ржЧрж░рж┐ржХ рж╕ржиржжржкрждрзНрж░, ржЙрждрзНрждрж░рж╛ржзрж┐ржХрж╛рж░ рж╕ржиржжржкрждрзНрж░ ржЗрждрзНржпрж╛ржжрж┐ рж╕рзЗржмрж╛ ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржпрж╝ред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржо ржХрзА?",
    answer:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржо рж╣рж▓рзЛ ржПржХржЯрж┐ ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржерзЗржХрзЗ ржмрж┐ржнрж┐ржирзНржи рж╕рзЗржмрж╛ ржпрзЗржоржи ржирж╛ржЧрж░рж┐ржХрждрзНржм рж╕ржиржж, ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕, ржЪрж╛рж░рж┐рждрзНрж░рж┐ржХ рж╕ржиржж ржЗрждрзНржпрж╛ржжрж┐ ржЕржирж▓рж╛ржЗржирзЗ ржЖржмрзЗржжржи ржХрж░рж╛ ржпрж╛ржпрж╝ ржПржмржВ ржирж┐рж░рзНржзрж╛рж░рж┐ржд ржлрж┐ ржЕржирж▓рж╛ржЗржирзЗ ржкрж░рж┐рж╢рзЛржз ржХрж░рж╛ ржпрж╛ржпрж╝ред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржорж╛ржзрзНржпржорзЗ ржХрзА ржХрзА рж╕рзЗржмрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝?",
    answer:
      "ржПржЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржорж╛ржзрзНржпржорзЗ ржирж╛ржЧрж░рж┐ржХрждрзНржм рж╕ржиржж, ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕, ржЪрж╛рж░рж┐рждрзНрж░рж┐ржХ рж╕ржиржж, ржнрзВржорж┐рж╣рзАржи рж╕ржиржж, ржЙрждрзНрждрж░рж╛ржзрж┐ржХрж╛рж░ рж╕ржиржж, ржЕржмрж┐ржмрж╛рж╣рж┐ржд рж╕ржиржж, ржмрж┐ржнрж┐ржирзНржи ржкрзНрж░рждрзНржпржпрж╝ржиржкрждрзНрж░ ржПржмржВ ржЕржирзНржпрж╛ржирзНржп рж╕рзЗржмрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржлрж┐ ржХрзАржнрж╛ржмрзЗ ржкрж░рж┐рж╢рзЛржз ржХрж░рждрзЗ рж╣ржпрж╝?",
    answer:
      "ржлрж┐ ржЕржирж▓рж╛ржЗржирзЗ ржмрж┐ржХрж╛рж╢, ржиржЧржж ржмрж╛ ржЕржирзНржпрж╛ржирзНржп ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзЗржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржорж╛ржзрзНржпржорзЗ ржкрж░рж┐рж╢рзЛржз ржХрж░рж╛ ржпрж╛ржпрж╝ред ржлрж┐ ржкрж░рж┐рж╢рзЛржзрзЗрж░ ржкрж░ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛ ржПржХржЯрж┐ ржкрзНрж░рж╛ржкрзНрждрж┐ рж╕рзНржмрзАржХрж╛рж░ржкрждрзНрж░ ржПржмржВ рж░рж╕рж┐ржж ржкрж╛ржмрзЗржиред",
  },
  {
    question: "рж╕рж╛ржкрзЛрж░рзНржЯрзЗ ржХрж┐ржнрж╛ржмрзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░ржм?",
    answer:
      "ржЖржкржирж┐ ржЖржорж╛ржжрзЗрж░ <a href='/contact' target='_blank'>ржпрзЛржЧрж╛ржпрзЛржЧ ржкрзГрж╖рзНржарж╛</a> ржнрж┐ржЬрж┐ржЯ ржХрж░рзЗ ржмрж╛ <a href='mailto:support@uniontax.gov.bd'>support@uniontax.gov.bd</a> ржЗржорзЗржЗрж▓ ржХрж░рзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж╛ржкрзЛрж░рзНржЯ ржЯрж┐ржорзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЖржмрзЗржжржи ржХрж░рж╛рж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржХрзА?",
    answer:
      "www.uniontax.gov.bd ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗ ржЧрж┐ржпрж╝рзЗ ржмрж┐ржнрж╛ржЧ, ржЬрзЗрж▓рж╛, ржЙржкржЬрзЗрж▓рж╛ ржПржмржВ ржЗржЙржирж┐ржпрж╝ржи ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржиред ржПрж░ржкрж░ ржХрж╛ржЩрзНржЦрж┐ржд рж╕рзЗржмрж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзЗ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рждржерзНржп ржжрж┐ржпрж╝рзЗ ржЖржмрзЗржжржи ржХрж░рзБржи ржПржмржВ ржЕржирж▓рж╛ржЗржирзЗ ржлрж┐ ржкрж░рж┐рж╢рзЛржз ржХрж░рзБржиред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рзБржмрж┐ржзрж╛ ржХрзА?",
    answer:
      "ржПржЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ рж╕ржоржпрж╝, ржЦрж░ржЪ ржПржмржВ ржпрж╛рждрж╛ржпрж╝рж╛рждрзЗрж░ ржЭрж╛ржорзЗрж▓рж╛ ржерзЗржХрзЗ ржорзБржХрзНрждрж┐ ржкрж╛ржЪрзНржЫрзЗржиред ржПржЫрж╛ржбрж╝рж╛, ржлрж┐ ржкрж░рж┐рж╢рзЛржзрзЗрж░ рж╕рзНржмржЪрзНржЫрждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ ржжрзБрж░рзНржирзАрждрж┐рж░ рж╕рзБржпрзЛржЧ ржХржорзЗржЫрзЗред",
  },
  {
    question:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕ржиржжржкрждрзНрж░рзЗрж░ рж╕рждрзНржпрждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ ржпрж╛ржпрж╝ ржХрзАржнрж╛ржмрзЗ?",
    answer:
      "рж╕ржиржжржкрждрзНрж░рзЗ ржПржХржЯрж┐ ржХрж┐ржЙржЖрж░ ржХрзЛржб ржерж╛ржХрзЗ, ржпрж╛ рж╕рзНржХрзНржпрж╛ржи ржХрж░рзЗ ржпрзЗржХрзЛржирзЛ рж╕ржоржпрж╝ рж╕ржиржжржкрждрзНрж░рзЗрж░ рж╕рждрзНржпрждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ ржпрж╛ржпрж╝ред",
  },
  {
    question:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЖржмрзЗржжржи ржХрж░рж╛рж░ ржкрж░ рж╕ржиржжржкрждрзНрж░ ржХрзАржнрж╛ржмрзЗ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝?",
    answer:
      "ржЖржмрзЗржжржи ржЕржирзБржорзЛржжрж┐ржд рж╣рж▓рзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░ ржорзБржарзЛржлрзЛржи ржПржмржВ ржЗ-ржорзЗржЗрж▓рзЗ ржПржХржЯрж┐ ржмрж╛рж░рзНрждрж╛ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗред рж╕ржиржжржкрждрзНрж░ржЯрж┐ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзЗ ржирзЗржУржпрж╝рж╛ ржпрж╛ржмрзЗ ржПржмржВ ржПрждрзЗ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржХрж░рзНрждрзГржкржХрзНрж╖рзЗрж░ рж╕рзНржмрж╛ржХрзНрж╖рж░ ржерж╛ржХржмрзЗред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржлрж┐ ржкрж░рж┐рж╢рзЛржзрзЗрж░ ржкрж░ ржХрзА рж╣ржпрж╝?",
    answer:
      "ржлрж┐ ржкрж░рж┐рж╢рзЛржзрзЗрж░ ржкрж░ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛ ржПржХржЯрж┐ ржкрзНрж░рж╛ржкрзНрждрж┐ рж╕рзНржмрзАржХрж╛рж░ржкрждрзНрж░ ржПржмржВ рж░рж╕рж┐ржж ржкрж╛ржмрзЗржиред ржПрж░ржкрж░ ржЗржЙржкрж┐ ржХрж░рзНрждрзГржкржХрзНрж╖ ржЖржмрзЗржжржиржЯрж┐ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ ржирж┐рж░рзНржзрж╛рж░рж┐ржд рж╕ржоржпрж╝рзЗрж░ ржоржзрзНржпрзЗ рж╕ржиржжржкрждрзНрж░ ржЗрж╕рзНржпрзБ ржХрж░ржмрзЗржиред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржХрзЗржи ржиржЧржж ржЯрж╛ржХрж╛ ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣ржпрж╝ ржирж╛?",
    answer:
      "ржиржЧржж ржЯрж╛ржХрж╛ ржЧрзНрж░рж╣ржг ржирж╛ ржХрж░рж╛рж░ ржЙржжрзНржжрзЗрж╢рзНржп рж╣рж▓рзЛ ржжрзБрж░рзНржирзАрждрж┐ ржПржмржВ ржЕрж░рзНрже рждржЫрж░рзБржкрзЗрж░ рж╕ржорзНржнрж╛ржмржирж╛ ржХржорж┐ржпрж╝рзЗ ржЖржирж╛ред ржПржЫрж╛ржбрж╝рж╛, ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзЗржорзЗржирзНржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржлрж┐ ржкрж░рж┐рж╢рзЛржзрзЗрж░ рж╕рзНржмржЪрзНржЫрждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣ржпрж╝ред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржХрзАржнрж╛ржмрзЗ рж╕ржиржжржкрждрзНрж░ ржкрж╛ржмрзЗржи?",
    answer:
      "рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржЖржмрзЗржжржи ржЕржирзБржорзЛржжрж┐ржд рж╣рж▓рзЗ рждрж╛ржжрзЗрж░ ржорзБржарзЛржлрзЛржи ржПржмржВ ржЗ-ржорзЗржЗрж▓рзЗ ржПржХржЯрж┐ ржмрж╛рж░рзНрждрж╛ ржкрж╛ржмрзЗржиред рж╕ржиржжржкрждрзНрж░ржЯрж┐ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзЗ ржирзЗржУржпрж╝рж╛ ржпрж╛ржмрзЗ ржПржмржВ ржПрждрзЗ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржХрж░рзНрждрзГржкржХрзНрж╖рзЗрж░ рж╕рзНржмрж╛ржХрзНрж╖рж░ ржерж╛ржХржмрзЗред",
  },
  {
    question:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржкрж┐ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржХрзАржнрж╛ржмрзЗ ржлрж┐ржбржмрзНржпрж╛ржХ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи?",
    answer:
      "рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржмрж╛ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржлрж┐ржбржмрзНржпрж╛ржХ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржиред ржПржЫрж╛ржбрж╝рж╛, рж╕рзЗржмрж╛рж░ ржорж╛ржи ржЙржирзНржиржпрж╝ржирзЗрж░ ржЬржирзНржп рждрж╛ржжрзЗрж░ ржорждрж╛ржоржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред",
  },
  {
    question: "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж рж╕рзЗржмрж╛ржЧрзБрж▓рзЛржХрзЗ ржЬржиржмрж╛ржирзНржзржм ржХрж░рж╛рж░ ржЬржирзНржп ржХрзА ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?",
    answer:
      "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж рж╕рзЗржмрж╛ржЧрзБрж▓рзЛржХрзЗ ржЬржиржмрж╛ржирзНржзржм ржХрж░рж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред www.uniontax.gov.bd ржирж╛ржоржХ ржПржХржЯрж┐ ржЕржирж▓рж╛ржЗржи рж╕рж┐рж╕рзНржЯрзЗржо ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛ рж╕рзНржмрж▓рзНржк ржЦрж░ржЪрзЗ, рж╕рзНржмрж▓рзНржк рж╕ржоржпрж╝рзЗ ржПржмржВ рж╣ржпрж╝рж░рж╛ржирж┐ржорзБржХрзНрждржнрж╛ржмрзЗ рж╕рзЗржмрж╛ ржкрзНрж░ржжрж╛ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗред",
  },
  {
    question: "www.uniontax.gov.bd ржЕржирж▓рж╛ржЗржи рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржХржЦржи ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣ржпрж╝?",
    answer:
      "www.uniontax.gov.bd ржЕржирж▓рж╛ржЗржи рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржЧржд рзирзжрззрзп-рзирзж ржЕрж░рзНржержмржЫрж░рзЗ рж╕ржорзНржнржмрзНржпрждрж╛ ржпрж╛ржЪрж╛ржЗржпрж╝рзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣ржпрж╝ред",
  },

  {
    question: "www.uniontax.gov.bd ржЕржирж▓рж╛ржЗржи рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐рж░ рж╢рзБржн ржЙржжрзНржмрзЛржзржи ржХрзЗ ржХрж░рзЗржи?",
    answer:
      "www.uniontax.gov.bd ржЕржирж▓рж╛ржЗржи рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐рж░ рж╢рзБржн ржЙржжрзНржмрзЛржзржи ржХрж░рзЗржи рж░ржВржкрзБрж░ ржмрж┐ржнрж╛ржЧрзЗрж░ ржорж╛ржиржирзАржпрж╝ ржмрж┐ржнрж╛ржЧрзАржпрж╝ ржХржорж┐рж╢ржирж╛рж░ ржЬржирж╛ржм ржорзЛ: ржЖржмрзНржжрзБрж▓ ржУржпрж╝рж╛рж╣рж╛ржм ржнрзВржЮрж╛ ржорж╣рзЛржжржпрж╝ред",
  },

  {
    question: "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ рж╕ржлржЯржУржпрж╝рзНржпрж╛рж░ржЯрж┐рж░ ржЙржжрзНржжрзЗрж╢рзНржп ржХрзА?",
    answer:
      "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ рж╕ржлржЯржУржпрж╝рзНржпрж╛рж░ржЯрж┐рж░ ржЙржжрзНржжрзЗрж╢рзНржп рж╣рж▓рзЛ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржерзЗржХрзЗ ржкрзНрж░ржжрждрзНржд рж╕рзЗржмрж╛рж╕ржорзВрж╣ржХрзЗ ржЬржиржЧржгрзЗрж░ ржХрж╛ржЫрзЗ рж╕рзНржмрж▓рзНржк ржЦрж░ржЪрзЗ, рж╕рзНржмрж▓рзНржк рж╕ржоржпрж╝рзЗ ржПржмржВ рж╣ржпрж╝рж░рж╛ржирж┐ржорзБржХрзНрждржнрж╛ржмрзЗ ржкрзНрж░ржжрж╛ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ред",
  },

  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржирж┐ржпрж╝ржи рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржХрж┐ржЙржЖрж░ ржХрзЛржбрзЗрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрзА?",
    answer:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ ржЗржЙржирж┐ржпрж╝ржи рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕ржиржжржкрждрзНрж░ ржПржмржВ рж░рж╢рж┐ржжрзЗ ржХрж┐ржЙржЖрж░ ржХрзЛржб ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝ред ржПржЗ ржХрзЛржб рж╕рзНржХрзНржпрж╛ржи ржХрж░рзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржпрзЗржХрзЛржирзЛ рж╕ржоржпрж╝ рж╕ржиржжржкрждрзНрж░рзЗрж░ рж╕рждрзНржпрждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред",
  },
  {
    question:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржо ржЪрж╛рж▓рзБрж░ ржлрж▓рзЗ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗрж░ ржЖржпрж╝ ржХрзАржнрж╛ржмрзЗ ржкрзНрж░ржнрж╛ржмрж┐ржд рж╣ржпрж╝рзЗржЫрзЗ?",
    answer:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржо ржЪрж╛рж▓рзБрж░ ржлрж▓рзЗ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗрж░ ржЖржпрж╝рзЗрж░ рж╕рзНржмржЪрзНржЫрждрж╛ ржирж┐рж╢рзНржЪрж┐ржд рж╣ржпрж╝рзЗржЫрзЗред ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзЗржорзЗржирзНржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржлрж┐ рж╕рж░рж╛рж╕рж░рж┐ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗрж░ ржмрзНржпрж╛ржВржХ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗ ржЬржорж╛ рж╣ржпрж╝, ржпрж╛ ржЕрж░рзНрже рждржЫрж░рзБржкрзЗрж░ рж╕ржорзНржнрж╛ржмржирж╛ ржХржорж┐ржпрж╝рзЗ ржжрж┐ржпрж╝рзЗржЫрзЗред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╣рзЛрж▓рзНржбрж┐ржВ ржЯрзНржпрж╛ржХрзНрж╕ ржХрзАржнрж╛ржмрзЗ ржкрж░рж┐рж╢рзЛржз ржХрж░рж╛ ржпрж╛ржпрж╝?",
    answer:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╣рзЛрж▓рзНржбрж┐ржВ ржЯрзНржпрж╛ржХрзНрж╕ ржЕржирж▓рж╛ржЗржирзЗ ржкрж░рж┐рж╢рзЛржз ржХрж░рж╛ ржпрж╛ржпрж╝ред ржиржЧржж ржмрж╛ ржмрж┐ржХрж╛рж╢рзЗрж░ ржорждрзЛ ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзЗржорзЗржирзНржЯ ржкржжрзНржзрждрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрж╛ржХрж╛ рж╕рж░рж╛рж╕рж░рж┐ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗрж░ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗ ржЬржорж╛ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝ред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛ржжрзЗрж░ ржХрзА ржХрзА рж╕рзБржмрж┐ржзрж╛ рж░ржпрж╝рзЗржЫрзЗ?",
    answer:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ рж╕ржоржпрж╝, ржЕрж░рзНрже ржПржмржВ ржнрзНрж░ржоржг ржЦрж░ржЪ рж╕рж╛рж╢рзНрж░ржпрж╝ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржПржЫрж╛ржбрж╝рж╛, ржЕржирж▓рж╛ржЗржирзЗ ржЖржмрзЗржжржи ржПржмржВ ржлрж┐ ржкрж░рж┐рж╢рзЛржзрзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╣ржпрж╝рж░рж╛ржирж┐ржорзБржХрзНржд рж╕рзЗржмрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕рзЗрж░ ржЖржмрзЗржжржи ржХрзАржнрж╛ржмрзЗ ржХрж░рж╛ ржпрж╛ржпрж╝?",
    answer:
      "ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕рзЗрж░ ржЬржирзНржп ржЖржмрзЗржжржи ржХрж░рждрзЗ www.uniontax.gov.bd ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗ ржЧрж┐ржпрж╝рзЗ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рждржерзНржп ржжрж┐ржпрж╝рзЗ ржЖржмрзЗржжржи ржХрж░рзБржи ржПржмржВ ржЕржирж▓рж╛ржЗржирзЗ ржлрж┐ ржкрж░рж┐рж╢рзЛржз ржХрж░рзБржиред ржЖржмрзЗржжржи ржЕржирзБржорзЛржжрж┐ржд рж╣рж▓рзЗ рж╕ржиржжржкрждрзНрж░ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рж╛ ржпрж╛ржмрзЗред",
  },
  {
    question:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛ржжрзЗрж░ ржЙржкрж╕рзНржерж┐рждрж┐ ржХрзАржнрж╛ржмрзЗ ржкрзНрж░ржнрж╛ржмрж┐ржд рж╣ржпрж╝рзЗржЫрзЗ?",
    answer:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржо ржЪрж╛рж▓рзБрж░ ржлрж▓рзЗ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛ржжрзЗрж░ ржЙржкрж╕рзНржерж┐рждрж┐ ржЙрж▓рзНрж▓рзЗржЦржпрзЛржЧрзНржпржнрж╛ржмрзЗ рж╣рзНрж░рж╛рж╕ ржкрзЗржпрж╝рзЗржЫрзЗред ржЕржирж▓рж╛ржЗржирзЗ рж╕рзЗржмрж╛ ржкрж╛ржУржпрж╝рж╛рж░ рж╕рзБржмрж┐ржзрж╛рж░ ржХрж╛рж░ржгрзЗ рждрж╛ржжрзЗрж░ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗ ржЖрж╕рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржпрж╝ ржирж╛ред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЕрж░рзНрже рждржЫрж░рзБржкрзЗрж░ рж╕ржорзНржнрж╛ржмржирж╛ ржХрзАржнрж╛ржмрзЗ ржХржорзЗржЫрзЗ?",
    answer:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржлрж┐ рж╕рж░рж╛рж╕рж░рж┐ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗрж░ ржмрзНржпрж╛ржВржХ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗ ржЬржорж╛ рж╣ржпрж╝, ржпрж╛ ржиржЧржж ржЕрж░рзНрже ржЖржжрж╛ржпрж╝рзЗрж░ рж╕ржоржпрж╝ рж╣ржУржпрж╝рж╛ рждржЫрж░рзБржкрзЗрж░ рж╕ржорзНржнрж╛ржмржирж╛ ржХржорж┐ржпрж╝рзЗ ржжрж┐ржпрж╝рзЗржЫрзЗред",
  },
  {
    question:
      "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржХрзАржнрж╛ржмрзЗ ржлрж┐ржбржмрзНржпрж╛ржХ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи?",
    answer:
      "рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржмрж╛ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржлрж┐ржбржмрзНржпрж╛ржХ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржиред ржПржЫрж╛ржбрж╝рж╛, рж╕рзЗржмрж╛рж░ ржорж╛ржи ржЙржирзНржиржпрж╝ржирзЗрж░ ржЬржирзНржп рждрж╛ржжрзЗрж░ ржорждрж╛ржоржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржХрзАржнрж╛ржмрзЗ рж╕ржиржжржкрждрзНрж░ ржкрж╛ржмрзЗржи?",
    answer:
      "ржЖржмрзЗржжржи ржЕржирзБржорзЛржжрж┐ржд рж╣рж▓рзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░ ржорзБржарзЛржлрзЛржи ржПржмржВ ржЗ-ржорзЗржЗрж▓рзЗ ржПржХржЯрж┐ ржмрж╛рж░рзНрждрж╛ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗред рж╕ржиржжржкрждрзНрж░ржЯрж┐ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзЗ ржирзЗржУржпрж╝рж╛ ржпрж╛ржмрзЗ ржПржмржВ ржПрждрзЗ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржХрж░рзНрждрзГржкржХрзНрж╖рзЗрж░ рж╕рзНржмрж╛ржХрзНрж╖рж░ ржерж╛ржХржмрзЗред",
  },
  {
    question: "ржХрзНржпрж╛рж╢рж▓рзЗрж╕ рж╕рзЗржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржХрзАржнрж╛ржмрзЗ ржлрж┐ ржкрж░рж┐рж╢рзЛржз ржХрж░рзЗржи?",
    answer:
      "рж╕рзЗржмрж╛ржЧрзНрж░рж╣рзАрждрж╛рж░рж╛ ржЕржирж▓рж╛ржЗржирзЗ ржмрж┐ржХрж╛рж╢, ржиржЧржж ржмрж╛ ржЕржирзНржпрж╛ржирзНржп ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзЗржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржорж╛ржзрзНржпржорзЗ ржлрж┐ ржкрж░рж┐рж╢рзЛржз ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржлрж┐ ржкрж░рж┐рж╢рзЛржзрзЗрж░ ржкрж░ рждрж╛рж░рж╛ ржПржХржЯрж┐ ржкрзНрж░рж╛ржкрзНрждрж┐ рж╕рзНржмрзАржХрж╛рж░ржкрждрзНрж░ ржПржмржВ рж░рж╕рж┐ржж ржкрж╛ржмрзЗржиред",
  },
  {
    question:
      "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ рж╕ржлржЯржУржпрж╝рзНржпрж╛рж░ржЯрж┐рж░ ржорж╛ржзрзНржпржорзЗ ржХрзА ржХрзА рж╕рзЗржмрж╛ ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржпрж╝?",
    answer:
      "ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ рж╕ржлржЯржУржпрж╝рзНржпрж╛рж░ржЯрж┐рж░ ржорж╛ржзрзНржпржорзЗ ржирж╛ржЧрж░рж┐ржХрждрзНржм рж╕ржиржж, ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕, ржУржпрж╝рж╛рж░рж┐рж╢рж╛ржи рж╕ржиржж, ржЙрждрзНрждрж░рж╛ржзрж┐ржХрж╛рж░рзА рж╕ржиржж, ржмрж┐ржмрж┐ржз ржкрзНрж░рждрзНржпржпрж╝ржиржкрждрзНрж░, ржЪрж╛рж░рж┐рждрзНрж░рж┐ржХ рж╕ржиржж, ржнрзВржорж┐рж╣рзАржи рж╕ржиржж, ржкрж╛рж░рж┐ржмрж╛рж░рж┐ржХ рж╕ржиржж, ржЕржмрж┐ржмрж╛рж╣рж┐ржд рж╕ржиржж, ржкрзБржиржГ ржмрж┐ржмрж╛рж╣ ржирж╛ рж╣ржУржпрж╝рж╛, ржмрж╛рж░рзНрж╖рж┐ржХ ржЖржпрж╝рзЗрж░ ржкрзНрж░рждрзНржпржпрж╝ржи, ржПржХржЗ ржирж╛ржорзЗрж░ ржкрзНрж░рждрзНржпржпрж╝ржи, ржкрзНрж░рждрж┐ржмржирзНржзрзА рж╕ржиржжржкрждрзНрж░, ржЕржирж╛ржкрждрзНрждрж┐ рж╕ржиржжржкрждрзНрж░, ржЖрж░рзНржерж┐ржХ ржЕрж╕рзНржмржЪрзНржЫрж▓рждрж╛рж░ рж╕ржиржжржкрждрзНрж░ ржЗрждрзНржпрж╛ржжрж┐ рж╕рзЗржмрж╛ ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржпрж╝ред",
  },
];
export default function Chatbot() {
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState<Message[]>([
    {
      text: "рж╣рзНржпрж╛рж▓рзЛ, ржЖржорж┐ ржЖржкржирж╛рж░ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ рж╕рж╣ржХрж╛рж░рзАред ржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржХрж┐ржнрж╛ржмрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐?",
      sender: "bot",
    },
  ]);
  const [inputValue, setInputValue] = useState("");
  const [showSuggestions, setShowSuggestions] = useState(false);
  const [isBotTyping, setIsBotTyping] = useState(false);
  const chatBoxRef = useRef<HTMLDivElement | null>(null);

  // Scroll to bottom whenever messages change
  useEffect(() => {
    if (chatBoxRef.current) {
      chatBoxRef.current.scrollTop = chatBoxRef.current.scrollHeight;
    }
  }, [messages]);

  //   useEffect(() => {
  //     const lastMessage = messages[messages.length - 1];
  //     if (lastMessage && lastMessage.sender === "bot") {
  //       const beepSound = new Audio("/message-tune.mp3");
  //       beepSound.currentTime = 0;
  //       beepSound.play().catch((error) => {
  //         console.error("Failed to play beep sound:", error);
  //       });
  //     }
  //   }, [messages]);
  const findNearestQuestion = (
    input: string,
    questions: QAPair[]
  ): QAPair | null => {
    const inputWords = input.toLowerCase().split(/\s+/);

    for (const question of questions) {
      const questionWords = question.question.toLowerCase().split(/\s+/);
      const match = inputWords.some((inputWord) =>
        questionWords.some((questionWord) => questionWord.includes(inputWord))
      );

      if (match) {
        return question;
      }
    }

    return null;
  };

  const handleSend = () => {
    if (inputValue.trim()) {
      setMessages([...messages, { text: inputValue, sender: "user" }]);
      setInputValue("");

      setIsBotTyping(true); // Show typing indicator

      // Simulate bot response
      setTimeout(() => {
        const lowerCaseInput = inputValue.toLowerCase();
        let botResponse = "";

        // Check for common phrases
        if (["hi", "hello", "hey", "рж╣рж╛ржЗ", "рж╣рзНржпрж╛рж▓рзЛ"].includes(lowerCaseInput)) {
          botResponse =
            "рж╣рзНржпрж╛рж▓рзЛ! ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ржпрж╝ ржЖржкржирж╛ржХрзЗ рж╕рзНржмрж╛ржЧрждржоред ржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржХрж┐ржнрж╛ржмрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐? ЁЯШК";
        } else if (
          [
            "no thanks",
            "no thank you",
            "not now",
            "ржирж╛ ржзржирзНржпржмрж╛ржж",
            "ржЖрж░рзЗржХржмрж╛рж░",
          ].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржХрзЛржи рж╕ржорж╕рзНржпрж╛ ржирзЗржЗ! ржкрзНрж░ржпрж╝рзЛржЬржирзЗ ржЖржмрж╛рж░ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржиред ржЖржорж░рж╛ ржЖржкржирж╛рж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржЬржирзНржп ржПржЦрж╛ржирзЗ ржЖржЫрж┐ред";
        } else if (["ok", "okay", "ржарж┐ржХ ржЖржЫрзЗ"].includes(lowerCaseInput)) {
          botResponse =
            "ржмрзБржЭрзЗржЫрж┐! ржпржжрж┐ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗрж░ рж╕рзЗржмрж╛ рж╕ржорзНржкрж░рзНржХрзЗ ржЖржкржирж╛рж░ ржХрзЛржирзЛ ржкрзНрж░рж╢рзНржи ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржЖржорж╛ржХрзЗ ржЬрж╛ржирж╛ржиред";
        } else if (
          ["bye", "goodbye", "see you", "ржмрж┐ржжрж╛ржпрж╝"].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржмрж┐ржжрж╛ржпрж╝! ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп ржзржирзНржпржмрж╛ржжред ржЖржмрж╛рж░ ржЖрж╕ржмрзЗржи!";
        } else if (
          ["thanks", "thank you", "ржзржирзНржпржмрж╛ржж"].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржЖржкржирж╛ржХрзЗ рж╕рзНржмрж╛ржЧрждржо! ржЖржорж░рж╛ ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрзЗрж░рзЗ ржЦрзБрж╢рж┐ред ржЖрж░ ржХрзЛржирзЛ рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рж▓рзЗ ржЬрж╛ржирж╛ржмрзЗржиред";
        } else if (
          ["how are you", "how's it going", "ржХрзЗржоржи ржЖржЫрзЗржи"].includes(
            lowerCaseInput
          )
        ) {
          botResponse =
            "ржЖржорж┐ ржПржХржЯрж┐ ржмржЯ, ржХрж┐ржирзНрждрзБ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржжрзЗрж░ рж╕рзЗржмрж╛ ржирж┐ржпрж╝рзЗ ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржПржЦрж╛ржирзЗ ржЖржЫрж┐ред ржЖржЬржХрзЗ ржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржХрж┐ржнрж╛ржмрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐?";
        } else if (
          ["what can you do", "help", "рж╕рж╛рж╣рж╛ржпрзНржп"].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржЯрзНрж░рзЗржб рж▓рж╛ржЗрж╕рзЗржирзНрж╕, ржЪрж╛рж░рж┐рждрзНрж░рж┐ржХ рж╕ржиржж, ржнрзВржорж┐рж╣рзАржи рж╕ржиржж, ржУржпрж╝рж╛рж░рж┐рж╢ рж╕ржиржж ржЗрждрзНржпрж╛ржжрж┐ рж╕рзЗржмрж╛ рж╕ржорзНржкрж░рзНржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐ред ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржи!";
        } else if (
          ["tell me a joke", "joke", "рж░рж╕рж┐ржХрждрж╛"].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржЕржмрж╢рзНржпржЗ! ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржХрзЗржи ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╣рж▓рзЛ? ржХрж╛рж░ржг ржХрж╛ржЧржЬрзЗрж░ ржХрж╛ржЬрзЗ ржХрзЗржЙ ржпрзЗржи рж╣рж╛рж░рж┐ржпрж╝рзЗ ржирж╛ ржпрж╛ржпрж╝! ЁЯШД";
        } else if (
          [
            "what's your name",
            "who are you",
            "рждрзЛржорж╛рж░ ржирж╛ржо ржХрж┐",
            "рждрзБржорж┐ ржХрзЗ",
          ].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржЖржорж┐ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛рж░ рж╕рж╣ржХрж╛рж░рзА, ржЖржкржирж╛ржХрзЗ ржЕржирж▓рж╛ржЗржи рж╕рзЗржмрж╛ рж╕ржорзНржкрж░рзНржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржПржЦрж╛ржирзЗ ржЖржЫрж┐ред ржЖржЬржХрзЗ ржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржХрж┐ржнрж╛ржмрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐?";
        } else if (
          ["i need help", "help me", "ржЖржорж╛рж░ рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржпрж╝рзЛржЬржи"].includes(
            lowerCaseInput
          )
        ) {
          botResponse =
            "ржЕржмрж╢рзНржпржЗ! ржЖржкржирж┐ ржХрзЛржи рж╕рзЗржмрж╛ рж╕ржорзНржкрж░рзНржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржитАФрж╕ржиржжржкрждрзНрж░, рж▓рж╛ржЗрж╕рзЗржирзНрж╕, ржмрж╛ ржЕржирзНржп ржХрж┐ржЫрзБ?";
        } else if (
          ["is this service free", "is it free", "ржПржЯрж╛ ржХрж┐ ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ"].includes(
            lowerCaseInput
          )
        ) {
          botResponse =
            "рж╣рзНржпрж╛ржБ, ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж рж╕рзЗржмрж╛ ржирж╛ржоржорж╛рждрзНрж░ ржЦрж░ржЪрзЗ ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржпрж╝ред ржХрж┐ржЫрзБ рж╕рзЗржмрж╛рж░ ржЬржирзНржп рж╕рж░ржХрж╛рж░рж┐ ржирж┐ржпрж╝ржо ржЕржирзБржпрж╛ржпрж╝рзА ржлрж┐ ржкрзНрж░ржжрж╛ржи ржХрж░рждрзЗ рж╣рждрзЗ ржкрж╛рж░рзЗред";
        } else if (
          [
            "how do i apply for a certificate",
            "apply for certificate",
            "рж╕ржиржжржкрждрзНрж░рзЗрж░ ржЬржирзНржп ржЖржмрзЗржжржи ржХрж┐ржнрж╛ржмрзЗ ржХрж░ржм",
          ].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржЖржкржирж┐ ржЖржорж╛ржжрзЗрж░ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ www.uniontax.gov.bd-ржП ржЧрж┐ржпрж╝рзЗ ржЕржирж▓рж╛ржЗржирзЗ рж╕ржиржжржкрждрзНрж░рзЗрж░ ржЬржирзНржп ржЖржмрзЗржжржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рзБржи, ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рждржерзНржп ржкрзВрж░ржг ржХрж░рзБржи ржПржмржВ ржЖржмрзЗржжржи ржЬржорж╛ ржжрж┐ржиред";
        } else if (
          ["how is privacy ensured", "privacy", "ржЧрзЛржкржирзАржпрж╝рждрж╛"].includes(
            lowerCaseInput
          )
        ) {
          botResponse =
            "ржЖржкржирж╛рж░ ржЧрзЛржкржирзАржпрж╝рждрж╛ ржЖржорж╛ржжрзЗрж░ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ред ржЗржЙржирж┐ржпрж╝ржи ржкрж░рж┐рж╖ржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржмрж╛ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржорзЗ ржЬржорж╛ ржжрзЗржУржпрж╝рж╛ рж╕ржорж╕рзНржд рждржерзНржп рж╕рзБрж░ржХрзНрж╖рж┐ржд ржПржмржВ ржПржиржХрзНрж░рж┐ржкрзНржЯрзЗржбред";
        } else if (
          [
            "how can i contact support",
            "contact support",
            "рж╕рж╛ржкрзЛрж░рзНржЯрзЗ ржХрж┐ржнрж╛ржмрзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░ржм",
          ].includes(lowerCaseInput)
        ) {
          botResponse =
            "ржЖржкржирж┐ ржЖржорж╛ржжрзЗрж░ <a href='/contact' target='_blank'>ржпрзЛржЧрж╛ржпрзЛржЧ ржкрзГрж╖рзНржарж╛</a> ржнрж┐ржЬрж┐ржЯ ржХрж░рзЗ ржмрж╛ <a href='mailto:support@uniontax.gov.bd'>support@uniontax.gov.bd</a> ржЗржорзЗржЗрж▓ ржХрж░рзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж╛ржкрзЛрж░рзНржЯ ржЯрж┐ржорзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ";
        } else {
          // Check for exact or partial matches with predefined questions
          const matchedQuestion = predefinedQuestions.find(
            (q) => q.question.toLowerCase() === lowerCaseInput
          );

          if (matchedQuestion) {
            botResponse = matchedQuestion.answer;
          } else {
            // Find the nearest question based on partial match
            const nearestQuestion = findNearestQuestion(
              inputValue,
              predefinedQuestions
            );

            if (nearestQuestion) {
              botResponse = `ржЖржкржирж┐ ржХрж┐ ржПржЯрж┐ ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рждрзЗ ржЪрзЗржпрж╝рзЗржЫрж┐рж▓рзЗржи: "${nearestQuestion.question}"? ржЙрждрзНрждрж░ рж╣рж▓рзЛ: ${nearestQuestion.answer}`;
            } else {
              botResponse =
                "ржжрзБржГржЦрж┐ржд, ржЖржорж┐ ржмрзБржЭрждрзЗ ржкрж╛рж░рж┐ржирж┐ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржиржЯрж┐ ржЖржмрж╛рж░ рж▓рж┐ржЦрзБржи ржмрж╛ ржирж┐ржЪрзЗрж░ рж╕рж╛ржЬрзЗрж╕рзНржЯрзЗржб ржкрзНрж░рж╢рзНржиржЧрзБрж▓рж┐ ржерзЗржХрзЗ ржПржХржЯрж┐ ржмрзЗржЫрзЗ ржирж┐ржиред";
            }
          }
        }

        setMessages((prev) => [
          ...prev,
          {
            text: botResponse,
            sender: "bot",
          },
        ]);
        setIsBotTyping(false); // Hide typing indicator

        setShowSuggestions(true);
      }, 1000);
    }
  };
  const handleSuggestedQuestionClick = (question: string) => {
    // Add the user's selected question to the messages
    setMessages((prev) => [...prev, { text: question, sender: "user" }]);

    setIsBotTyping(true);

    // Simulate bot response
    setTimeout(() => {
      const matchedQuestion = predefinedQuestions.find(
        (q) => q.question.toLowerCase() === question.toLowerCase()
      );

      if (matchedQuestion) {
        setMessages((prev) => [
          ...prev,
          {
            text: matchedQuestion.answer,
            sender: "bot",
          },
        ]);
      } else {
        setMessages((prev) => [
          ...prev,
          {
            text: "I'm sorry, I don't understand. Can you rephrase or choose another question?",
            sender: "bot",
          },
        ]);
      }
      setIsBotTyping(false); // Hide typing indicator
      setShowSuggestions(true);
    }, 1000);
  };

  const renderSuggestedQuestions = () => {
    if (!showSuggestions) return null;

    // Shuffle the predefined questions to make them random
    const shuffledQuestions = [...predefinedQuestions].sort(
      () => Math.random() - 0.5
    );

    // Filter out the questions that have already been asked
    const filteredQuestions = shuffledQuestions.filter(
      (q) => !messages.some((msg) => msg.text === q.question)
    );

    // If no nearest questions are found, use the filtered list
    const nearestQuestions = predefinedQuestions
      .filter((q) => findNearestQuestion(inputValue, [q]))
      .slice(0, 2);

    // If nearestQuestions is empty, use the first 2 filtered questions
    let suggestions =
      nearestQuestions.length > 0
        ? nearestQuestions.filter(
            (q) => !messages.some((msg) => msg.text === q.question)
          )
        : filteredQuestions.slice(0, 2);

    // If no suggestions are available (all questions have been asked), reset the filter
    if (suggestions.length === 0) {
      suggestions = shuffledQuestions.slice(0, 2);
    }

    return (
      <div className="mb-3">
        <List
          dataSource={suggestions}
          renderItem={(item) => (
            <List.Item className="my-1 py-0 border-0">
              <Button
                className="border ms-auto overflow-hidden"
                type="link"
                onClick={() => handleSuggestedQuestionClick(item.question)}
              >
                {item.question}
              </Button>
            </List.Item>
          )}
        />
      </div>
    );
  };

  return (
    <div className="position-fixed bottom-0 end-0 m-3 " style={{ zIndex: 999 }}>
      {!isOpen && (
        <Button
          type="primary"
          shape="circle"
          icon={<MessageOutlined style={{ fontSize: "24px" }} />}
          size="large"
          onClick={() => setIsOpen(true)}
          className="shadow"
          aria-label="Open chat"
          style={{
            width: "56px",
            height: "56px",
            zIndex: 100,
          }}
        />
      )}
      {isOpen && (
        <Card
          title="ржЗржЙржирж┐рзЯржи ржЯрзНржпрж╛ржХрзНрж╕ ржЪрзНржпрж╛ржЯ"
          extra={
            <Button
              type="text"
              icon={<CloseOutlined />}
              onClick={() => setIsOpen(false)}
              aria-label="Close chat"
            />
          }
          style={{
            width: "95%",
            maxWidth: 450,
            minWidth: 300,
            zIndex: 999,
          }}
          className="shadow w-100 "
        >
          <div
            ref={chatBoxRef}
            style={{
              height: `calc(${window.innerHeight * 0.5}px)`,
              overflowY: "auto",
              marginBottom: "16px",
            }}
          >
            <List
              className="mb-3"
              dataSource={messages}
              renderItem={(item) => (
                <List.Item
                  style={{
                    display: "flex",
                    justifyContent:
                      item.sender === "user" ? "flex-end" : "flex-start",
                    wordBreak: "break-word",
                    whiteSpace: "normal",
                  }}
                >
                  <div
                    style={{
                      backgroundColor:
                        item.sender === "user" ? "#e6f7ff" : "#f0f0f0",
                      padding: "8px 12px",
                      borderRadius: "8px",
                      maxWidth: "70%",
                    }}
                  >
                    <div dangerouslySetInnerHTML={{ __html: item.text }} />
                  </div>
                </List.Item>
              )}
            />
            {isBotTyping && (
              <List.Item className="d-flex justify-content-start">
                <div
                  className="bg-light p-2 rounded"
                  style={{ maxWidth: "70%" }}
                >
                  <span className="me-2">ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи</span>
                  <div className="d-inline-block">
                    <span
                      className="d-inline-block bg-secondary rounded-circle me-1"
                      style={{
                        width: "6px",
                        height: "6px",
                        animation: "bounce 1s infinite",
                      }}
                    />
                    <span
                      className="d-inline-block bg-secondary rounded-circle me-1"
                      style={{
                        width: "6px",
                        height: "6px",
                        animation: "bounce 1s infinite",
                        animationDelay: "0.2s",
                      }}
                    />
                    <span
                      className="d-inline-block bg-secondary rounded-circle"
                      style={{
                        width: "6px",
                        height: "6px",
                        animation: "bounce 1s infinite",
                        animationDelay: "0.4s",
                      }}
                    />
                  </div>
                </div>
              </List.Item>
            )}
          </div>
          {renderSuggestedQuestions()}
          <div className="d-flex">
            <Input
              value={inputValue}
              onChange={(e) => setInputValue(e.target.value)}
              onPressEnter={handleSend}
              placeholder="Type a message..."
              className="flex-grow-1 me-2"
              style={{ flex: 1 }} // Ensure input field takes up available space
            />
            <Button
              type="primary"
              icon={<SendOutlined />}
              onClick={handleSend}
              aria-label="Send message"
            />
          </div>
        </Card>
      )}
    </div>
  );
}
